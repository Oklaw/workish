<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workish — Reset Password</title>
  <meta name="description" content="Reset your Workish account password." />
  <meta name="geo.region" content="US-VA">
  <meta name="geo.placename" content="Northern Virginia">

  <style>
    :root{
      --forest:#003924;
      --ink:#0f2a1b;
      --sub:#224E3B;
      --cream:#F7F3EA;
      --off:#FAF8F2;
      --gold:#FFD66B;
      --line:rgba(0,0,0,.14);
      --font:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      --shadow:0 10px 24px rgba(0,0,0,.10);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:var(--font); color:var(--ink); background:var(--cream);
      -webkit-font-smoothing:antialiased;
    }
    body::before{
      content:""; position:fixed; inset:0; z-index:-2;
      background:url("/images/customer.PNG") center/cover no-repeat;
      filter:brightness(.96) saturate(1.02) blur(.3px);
    }
    body::after{
      content:""; position:fixed; inset:0; z-index:-1;
      background:linear-gradient(180deg,
        rgba(0,57,36,.30) 0px,
        rgba(0,57,36,.24) 280px,
        rgba(247,243,234,.18) 60%,
        rgba(247,243,234,.22) 100%);
      pointer-events:none;
    }

    .site-header{ position:sticky; top:0; z-index:50; background:#fff; border-bottom:1px solid var(--line); }
    .nav-wrap{ height:84px; display:flex; align-items:center; gap:18px; max-width:1100px; margin:0 auto; padding:0 16px; }
    .nav-brand{ display:flex; align-items:center; text-decoration:none; }
    .nav-logo{ max-height:86px; width:auto; display:block; object-fit:contain; }

    .shell{ max-width:1100px; margin:0 auto; padding:28px 16px 56px; }
    .hero{
      display:flex; flex-direction:column; gap:10px; margin-bottom:18px; color:#fff;
      text-shadow:0 3px 6px rgba(0,0,0,.40);
    }
    .hero h1{ margin:0; font-size:clamp(26px,4.6vw,40px); line-height:1.12; letter-spacing:-.02em; font-weight:900; }
    .hero p{ margin:0; font-weight:600; font-size:1.05rem; }

    .card{
      background:#fff; border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow);
      max-width:560px; padding:20px 18px 18px;
    }
    .field{ display:flex; flex-direction:column; gap:6px; margin-top:12px; }
    .field label{ font-weight:800; color:#173627; }
    .control{
      display:flex; align-items:center; gap:8px; background:var(--off);
      border:1px solid var(--line); border-radius:12px; padding:12px 14px; color:#1b2d23;
    }
    .control input{ border:none; outline:none; background:transparent; flex:1; font-size:15px; color:#1b2d23; }

    .cta{
      width:100%; height:52px; margin-top:14px; border:none; border-radius:14px;
      font-weight:900; font-size:18px; color:#fff; background:var(--forest);
      cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,.12);
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
    }
    .cta[disabled]{ opacity:.65; cursor:not-allowed; }
    .tiny{ font-size:.92rem; color:#375445; margin-top:10px; }

    .error{ margin-top:10px; padding:10px 12px; border:1px solid #e7c5c5; background:#fff3f3; color:#7a1e1e; border-radius:10px; display:none; }
    .success{ margin-top:10px; padding:10px 12px; border:1px solid #cde4d6; background:#f3fbf7; color:#134b33; border-radius:10px; display:none; }

    .sr-only{ position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body>

  <header class="site-header" role="banner">
    <div class="nav-wrap">
      <a class="nav-brand" href="/index.html" aria-label="Workish Home">
        <img src="/images/worklogo.PNG" alt="Workish" class="nav-logo">
      </a>
    </div>
  </header>

  <main class="shell">
    <section class="hero">
      <h1>Reset your password</h1>
      <p>Enter your email and we’ll send a secure reset link.</p>
    </section>

    <section class="card" aria-label="Reset password">
      <form id="resetForm" novalidate>
        <div class="field">
          <label for="email">Email</label>
          <div class="control">
            <input id="email" name="email" type="email" inputmode="email" autocomplete="email" placeholder="you@example.com" required />
          </div>
        </div>

        <button class="cta" id="resetBtn" type="submit">
          <span id="btnTxt">Send reset link</span>
          <span id="btnSpin" class="sr-only" aria-hidden="true">Loading…</span>
        </button>

        <div id="err" class="error" role="alert"></div>
        <div id="ok" class="success" role="status"></div>

        <p class="tiny">
          Remembered it? <a href="/login.html">Back to sign in →</a>
        </p>
      </form>
    </section>
  </main>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAsemgXgVrgclikdZbfNvaVaBWcvSQqQRY",
      authDomain: "workish-a70bb.firebaseapp.com",
      projectId: "workish-a70bb",
      storageBucket: "workish-a70bb.firebasestorage.app",
      messagingSenderId: "520376346783",
      appId: "1:520376346783:web:3fcbcb08edf86dd7e79aaa",
      measurementId: "G-CN0QH1BJEN"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const form = document.getElementById('resetForm');
    const email = document.getElementById('email');
    const btn = document.getElementById('resetBtn');
    const btnTxt = document.getElementById('btnTxt');
    const btnSpin = document.getElementById('btnSpin');
    const err = document.getElementById('err');
    const ok = document.getElementById('ok');

    function validEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }
    function setBusy(b){
      btn.disabled = b;
      btnTxt.textContent = b ? "Sending…" : "Send reset link";
      btnSpin.classList.toggle('sr-only', !b);
    }
    function showError(msg){
      err.textContent = msg; err.style.display='block';
      ok.style.display='none';
    }
    function showOk(msg){
      ok.textContent = msg; ok.style.display='block';
      err.style.display='none';
    }

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      err.style.display='none'; ok.style.display='none';

      const emailVal = email.value.trim().toLowerCase();
      if(!validEmail(emailVal)){ showError("Enter a valid email address."); email.focus(); return; }

      setBusy(true);
      try{
        // Optional: force reset link to bring them back to your site
        await sendPasswordResetEmail(auth, emailVal, {
          url: window.location.origin + "/login.html"
        });
        showOk("If an account exists for that email, a reset link has been sent. Check your inbox (and spam).");
      }catch(ex){
        const code = ex?.code || "";
        if(code === "auth/invalid-email") showError("That email address looks invalid.");
        else if(code === "auth/too-many-requests") showError("Too many requests. Try again in a bit.");
        else showError(ex?.message || "Could not send reset email. Please try again.");
      }finally{
        setBusy(false);
      }
    });
  </script>
</body>
</html>
